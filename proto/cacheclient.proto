syntax = "proto3";

option java_multiple_files = true;
option java_package = "grpc.cache_client";

package cache_client;

import "google/api/httpbody.proto";
import "google/api/annotations.proto";
import "google/protobuf/empty.proto";


enum ECacheResult {
  Invalid = 0;
  Ok = 1;
  Hit = 2;
  Miss = 3;

  reserved 4 to 6;
}


service Scs {
  rpc Get (_GetRequest) returns (_GetResponse) {}
  rpc Set (_SetRequest) returns (_SetResponse) {}
}

service HttpCache {
  rpc Get (_GetRequest) returns (google.api.HttpBody) {
    option (google.api.http) = {
      get: "/cache/get/{cache_key}"
    };
  }
  rpc Set (_SetRequest) returns (_SetResponse) {
    option (google.api.http) = {
      post: "/cache/set/{cache_key}"
      body: "cache_body"
      // ?ttl_milliseconds=ttlMillis
    };
  }
}


message _GetRequest {
  bytes cache_key = 1;
}

message _GetResponse {
  ECacheResult result = 1;
  bytes cache_body = 2;
  string message = 3;
}

message _SetRequest {
  bytes cache_key = 1;
  bytes cache_body = 2;
  uint32 ttl_milliseconds = 3;
}

message _SetResponse {
  ECacheResult result = 1;
  string message = 2;
}
